{
  "nodes": [
    {
      "parameters": {
        "jsCode": "const respuestaSubida = items[0].json;\nconst datosTelegram = $('Disparador de Telegram').item.json;\nconst idArchivo = datosTelegram.message.photo[1].file_id;\nconst marcaTiempo = new Date().getTime();\nconst fecha = new Date().toISOString().split('T')[0];\n\n// Obtener el nombre del archivo desde la respuesta de Supabase\nlet nombreArchivoReal = respuestaSubida.Key || respuestaSubida.Id || respuestaSubida.path || `${fecha}/${marcaTiempo}-${idArchivo}.jpg`;\n\n// CORREGIR: Eliminar 'imagenes/' del inicio si ya estÃ¡ presente para evitar duplicaciÃ³n\nif (nombreArchivoReal.startsWith('imagenes/')) {\n  nombreArchivoReal = nombreArchivoReal.replace('imagenes/', '');\n}\n\n// Generar URL pÃºblica correcta sin duplicar 'imagenes'\nconst urlPublica = `https://rrmafdbxvimmvcerwguy.supabase.co/storage/v1/object/public/imagenes/${nombreArchivoReal}`;\n\nreturn {\n  json: {\n    exito: true,\n    id: nombreArchivoReal,\n    nombre: nombreArchivoReal.split('/').pop(),\n    nombreArchivo: nombreArchivoReal,\n    rutaCompleta: nombreArchivoReal,\n    enlaceVisualizacion: urlPublica,\n    urlPublica: urlPublica,\n    Clave: nombreArchivoReal,\n    bucket: 'imagenes',\n    fechaSubida: new Date().toISOString(),\n    mensajeOriginal: datosTelegram.message.caption || '',\n    idChat: datosTelegram.message.chat.id\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1088,
        -288
      ],
      "id": "d3f713ca-3a6a-4bb0-bf04-2b79b7f79f79",
      "name": "Procesar Info Upload"
    },
    {
      "parameters": {
        "description": "Llama a esta herramienta para combinar dos imÃ¡genes. Debes pasar un prompt de generaciÃ³n de imagen, las URL de ambas imÃ¡genes y un tÃ­tulo para esta nueva imagen. Para esto se debe consultar la herrmienta buscar_imagenes para esta funcion",
        "workflowId": {
          "__rl": true,
          "value": "Pg0HU7Kw2J5qkOw5",
          "mode": "list",
          "cachedResultUrl": "/workflow/Pg0HU7Kw2J5qkOw5",
          "cachedResultName": "combinar_imagenes_nuevo"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "prompt": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('prompt', ``, 'string') }}",
            "UrlImagen2": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('UrlImagen2', ``, 'string') }}",
            "UrlImagen1": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('UrlImagen1', ``, 'string') }}",
            "TituloDeLaImagen": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('TituloDeLaImagen', ``, 'string') }}",
            "IdDelProducto": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('IdDelProducto', ``, 'string') }}",
            "TipoDeImagen": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('TipoDeImagen', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "prompt",
              "displayName": "prompt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "UrlImagen2",
              "displayName": "UrlImagen2",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "UrlImagen1",
              "displayName": "UrlImagen1",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "TituloDeLaImagen",
              "displayName": "TituloDeLaImagen",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "IdDelProducto",
              "displayName": "IdDelProducto",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "TipoDeImagen",
              "displayName": "TipoDeImagen",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        -288,
        352
      ],
      "id": "ab9e2884-9515-4725-96ff-baf140de78de",
      "name": "combinar_imagenes1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://rrmafdbxvimmvcerwguy.supabase.co/storage/v1/object/imagenes/{{ $now.toUnixInteger() }}-{{ $json.result.file_id.replace(/[^a-zA-Z0-9]/g, '') }}.jpg",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "supabaseApi",
        "sendBody": true,
        "contentType": "binaryData",
        "inputDataFieldName": "data",
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1296,
        -288
      ],
      "id": "53cf1f05-f88b-409d-adc8-fb25495b8df2",
      "name": "Subir a Supabase",
      "credentials": {
        "supabaseApi": {
          "id": "W8gqsCw5s1YHm5SZ",
          "name": "Supabase Me LLEVO ESTO"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.message.text }}",
        "needsFallback": true,
        "options": {
          "systemMessage": "=# Prompt para Agente de E-commerce en N8N\n\n## 1. Rol y Objetivo\n\n**Rol**: Eres un asistente experto en gestiÃ³n de e-commerce, especializado en la plataforma \"MeLlevaEstaMonda\". Tu nombre es \"Monda\".\n\n**Objetivo Principal**: Tu objetivo es ayudar a los usuarios a gestionar productos, categorÃ­as, y otras funcionalidades de la tienda de manera eficiente y precisa, utilizando las herramientas proporcionadas. Debes ser proactivo, amigable y seguir las instrucciones al pie de la letra.\n\n## 2. Contexto\n\nOperas dentro de un flujo de N8N que se activa a travÃ©s de un bot de Telegram. Tienes acceso a una base de datos en Supabase y a un conjunto de herramientas (sub-flujos de N8N) para interactuar con ella. Cada interacciÃ³n es parte de una conversaciÃ³n con un usuario que espera una respuesta clara y acciones concretas.\n\n## 3. Instrucciones Generales\n\n- **Analiza la PeticiÃ³n**: Lee y comprende cuidadosamente la solicitud del usuario para identificar su intenciÃ³n principal (crear, actualizar, consultar, etc.).\n- **Usa las Herramientas**: Utiliza las herramientas disponibles para cumplir con la solicitud. No intentes adivinar informaciÃ³n; si los datos necesarios no estÃ¡n en la peticiÃ³n, haz preguntas claras y directas al usuario.\n- **Formato de Salida de Herramientas**: Responde siempre en el formato JSON especificado para cada herramienta. No aÃ±adas texto, explicaciones o saludos adicionales en la salida JSON de la herramienta.\n- **Formato de Respuesta al Usuario**:\n  - **CRÃTICO: NUNCA, bajo ninguna circunstancia, uses comillas simples inversas (`) para rodear URLs, IDs, nombres de archivo o cualquier otro dato en tus respuestas conversacionales.** La informaciÃ³n debe ser entregada en texto plano para que el usuario pueda copiarla y pegarla directamente.\n    - **MAL:** `https://mi-url.com/recurso`\n    - **BIEN:** https://mi-url.com/recurso\n  - SÃ© amigable y conversacional, pero entrega los datos importantes de forma limpia.\n- **Regla sobre Nombres de Archivo**:\n    - **CRÃTICO: Al crear o renombrar archivos de imagen, el nombre DEBE ser Ãºnico y NUNCA debe contener la extensiÃ³n dos veces (ej: `imagen.jpg.jpg`).**\n    - Antes de proponer un nuevo nombre, verifica que no exista.\n    - AsegÃºrate de que la extensiÃ³n (`.jpg`, `.png`, etc.) solo aparezca una vez al final del nombre.\n- **Manejo de Errores**: Si una herramienta falla o no puedes cumplir con la solicitud, informa al usuario de manera clara, explicando el problema y sugiriendo una soluciÃ³n.\n\n## 4. Herramientas Disponibles\n\nA continuaciÃ³n se describen las herramientas que puedes utilizar, en el orden lÃ³gico en que deberÃ­as considerar usarlas.\n\n### 4.1. `consultar_categorias`\n\n- **DescripciÃ³n**: Obtiene un listado completo de todas las categorÃ­as de productos disponibles.\n- **CuÃ¡ndo usarla**: Antes de crear o actualizar un producto, para asegurar que se asigna una categorÃ­a vÃ¡lida.\n\n### 4.2. `consultar_productos`\n\n- **DescripciÃ³n:** Busca productos por nombre. Es el punto de partida para cualquier acciÃ³n sobre un producto existente.\n- **CuÃ¡ndo usarla**: **OBLIGATORIO** al inicio de cualquier flujo que implique un producto (editar, consultar imÃ¡genes, etc.).\n- **ParÃ¡metros**: `nombre_producto` (string).\n- **Reglas**: Confirma siempre el producto con el usuario antes de proceder.\n\n### 4.3. `consultar_imagenes_producto`\n\n- **DescripciÃ³n:** Consulta la tabla `productos` para obtener las URLs de las imÃ¡genes asociadas a un producto especÃ­fico.\n- **CuÃ¡ndo usarla**: DespuÃ©s de confirmar un producto con `consultar_productos` y antes de cualquier acciÃ³n sobre las imÃ¡genes.\n- **ParÃ¡metros**: `producto_id` (string, obligatorio).\n- **Reglas**: Informa al usuario quÃ© campos de imagen tienen URL y cuÃ¡les estÃ¡n vacÃ­os.\n\n### 4.4. `crear_producto`\n\n- **DescripciÃ³n**: Crea un nuevo producto en la tienda.\n- **ParÃ¡metros**: `nombre_producto`, `De_que_trata_el_producto`, `precio`, `caracteristicas`, `categoria_id`.\n- **Reglas**: Al finalizar, proporciona un resumen y la URL pÃºblica del producto.\n\n### 4.5. `actualizar_productos`\n\n- **DescripciÃ³n:** Actualiza cualquier campo de un producto existente, incluyendo la asignaciÃ³n de URLs de imÃ¡genes.\n- **ParÃ¡metros**: `id_del_producto_para_actualizar`, `campo_a_actualizar`, `nuevo_valor`.\n- **Reglas**: Requiere un `ID` de producto confirmado.\n\n### 4.6. `buscar_imagenes`\n\n- **DescripciÃ³n:** Busca archivos en el bucket `imagenes` de Supabase Storage.\n- **CuÃ¡ndo usarla**: Para listar imÃ¡genes existentes antes de una ediciÃ³n o asignaciÃ³n.\n- **ParÃ¡metros**: `prefix` (opcional).\n- **Reglas**: Construye y confirma siempre la URL completa con el usuario.\n\n### 4.7. `renombrar_archivo_supabase2`\n\n- **DescripciÃ³n:** Renombra o mueve un archivo en Supabase Storage.\n- **CuÃ¡ndo usarla**: DespuÃ©s de subir una imagen, para darle un nombre descriptivo y correcto.\n- **ParÃ¡metros**: `oldPath`, `newPath`.\n- **Reglas**: Informa siempre al usuario de la nueva URL tras el renombrado.\n\n### 4.8. `editar_imagen`\n\n- **DescripciÃ³n:** Realiza ediciones sobre una imagen o genera una nueva a partir de un prompt.\n- **ParÃ¡metros**: `imagen_id`, `prompt_de_edicion`.\n- **Reglas**: **NUNCA** usar sin haber confirmado producto e imagen.\n\n### 4.9. `combinar_imagenes`\n\n- **DescripciÃ³n:** Combina dos imÃ¡genes una al lado de la otra (horizontalmente) y guarda el resultado como un nuevo archivo.\n- **CuÃ¡ndo usarla**: Solo cuando el usuario lo pida explÃ­citamente y se haya seguido el flujo de confirmaciÃ³n.\n- **ParÃ¡metros**: `url_imagen1` (string), `url_imagen2` (string), `nombre_nuevo_archivo` (string).\n- **Reglas**:\n    - **Flujo Obligatorio**: Requiere haber confirmado el producto (`consultar_productos`) y las dos URLs de las imÃ¡genes a combinar.\n    - **Nombre de Archivo**: El `nombre_nuevo_archivo` debe ser Ãºnico y no tener doble extensiÃ³n.\n\n### 4.10. `creador_articulos`\n\n- **DescripciÃ³n:** Genera un artÃ­culo de blog sobre un tema especÃ­fico, utilizando informaciÃ³n de un producto si se proporciona.\n- **CuÃ¡ndo usarla**: Cuando el usuario quiera crear contenido para el blog de la tienda.\n- **ParÃ¡metros**: `tema_del_articulo` (string), `id_del_producto` (string, opcional).\n- **Reglas**:\n    - Si se proporciona un `id_del_producto`, primero usa `consultar_productos` para obtener sus detalles y usarlos como contexto.\n    - Informa al usuario cuando el artÃ­culo estÃ© listo y proporciona un resumen o enlace.\n\n## 5. Flujos de Trabajo Obligatorios\n\n### 5.1. Flujo para Editar o Combinar ImÃ¡genes (Reglas Ultra Estrictas)\n\n1.  **Consulta de Producto**: Usa `consultar_productos` para encontrar y confirmar el producto.\n2.  **Consulta de ImÃ¡genes del Producto**: Usa `consultar_imagenes_producto` para ver las imÃ¡genes ya asignadas. Muestra al usuario las URLs.\n3.  **ConfirmaciÃ³n de ImÃ¡genes**: Pregunta al usuario cuÃ¡l(es) imagen(es) quiere usar (una para editar, dos para combinar).\n4.  **EjecuciÃ³n de la AcciÃ³n**:\n    - Para editar: Con la URL confirmada, usa `editar_imagen`.\n    - Para combinar: Con las dos URLs confirmadas, usa `combinar_imagenes`.\n\n### 5.2. Flujo para Subir y Asignar una Imagen\n\n1.  **RecepciÃ³n y Renombrado**: Al subir una imagen, ofrece renombrarla con `renombrar_archivo_supabase2`, asegurando un nombre Ãºnico y sin doble extensiÃ³n.\n2.  **Preguntar Destino**: Pregunta si desea asignarla a un producto.\n3.  **AsignaciÃ³n a Producto**:\n    a. Usa `consultar_productos` para confirmar el producto.\n    b. Usa `consultar_imagenes_producto` para mostrar los campos de imagen disponibles.\n    c. Pregunta en quÃ© campo (`imagen_principal`, etc.) debe ir la nueva imagen.\n    d. Usa `actualizar_productos` para guardar la URL.",
          "returnIntermediateSteps": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -432,
        -48
      ],
      "id": "635285af-98a8-4830-b98f-01ee3daf76db",
      "name": "Agente Google"
    },
    {
      "parameters": {
        "chatId": "={{ $('Disparador de Telegram').item.json.message.chat.id }}",
        "text": "={{ $json.output }}",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        192,
        -48
      ],
      "id": "0ed249d7-0ad6-43f9-8da1-905a1ce3abe3",
      "name": "Responder",
      "webhookId": "f9df111e-1004-4aff-b458-779444006ed8",
      "credentials": {
        "telegramApi": {
          "id": "Tsll6EFLsILnT8d3",
          "name": "Chat NANO BOT"
        }
      }
    },
    {
      "parameters": {
        "resource": "file",
        "fileId": "={{ $json.message.photo[1].file_id }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -1488,
        -288
      ],
      "id": "252159f0-94f2-4b8f-a672-08da564c26b6",
      "name": "Descargar Archivo",
      "webhookId": "fb18f65f-c1cf-4473-b59d-d59d6b96e9ea",
      "credentials": {
        "telegramApi": {
          "id": "Tsll6EFLsILnT8d3",
          "name": "Chat NANO BOT"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "07d93f5a-e963-4394-9f34-b276a894961f",
                    "leftValue": "={{ $json.message.voice.mime_type }}",
                    "rightValue": "audio/ogg",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "e7211e46-0f49-46a0-9cb7-e83fed150efd",
                    "leftValue": "={{ $json.message.photo }}",
                    "rightValue": "",
                    "operator": {
                      "type": "array",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Foto"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.message.text }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "id": "85edf561-8f5e-4215-9e19-78ff0392068e"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Texto"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -1776,
        -96
      ],
      "id": "68ce16bf-b98c-43ae-adf3-6dbcbf64a5d9",
      "name": "Conmutador"
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -2032,
        -80
      ],
      "id": "013c7be8-4e00-4a07-a089-70f8a8d07858",
      "name": "Disparador de Telegram",
      "webhookId": "bea4843e-25e4-4d89-b3f6-4237798e9b42",
      "credentials": {
        "telegramApi": {
          "id": "Tsll6EFLsILnT8d3",
          "name": "Chat NANO BOT"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "53de4eb0-6684-48f5-a5b5-2b3bedaff817",
              "name": "message.text",
              "value": "=âœ… Imagen subida exitosamente a Supabase!\n\nğŸ“ **InformaciÃ³n del archivo:**\n- **Ruta completa**: {{ $json.rutaCompleta }}\n- **Nombre actual**: {{ $json.nombre }}\n- **URL pÃºblica**: {{ $json.urlPublica }}\n\nğŸ”§ **Para renombrar este archivo**, usa la herramienta `Cambiar Nombre` con:\n- **ID del archivo**: {{ $json.id }}\n- **Nuevo nombre**: El nombre que desees para la imagen\n\nâ“ Pregunta al usuario: Â¿CÃ³mo quieres nombrar esta imagen?",
              "type": "string"
            },
            {
              "id": "a0c2ce8d-42f9-4728-9e87-3b0000fdf105",
              "name": "Id",
              "value": "={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "7cfd76ae-1ee6-4703-8d9a-b49bfdb85ecd",
              "name": "publicUrl",
              "value": "={{ $json.urlPublica }}",
              "type": "string"
            },
            {
              "id": "44dfdd5e-c404-4490-80fb-a4c0b5683243",
              "name": "webViewLink",
              "value": "={{ $json.enlaceVisualizacion }}",
              "type": "string"
            },
            {
              "id": "64cbefb9-a2f9-404e-a8e5-4443583b404c",
              "name": "fullPath",
              "value": "={{ $json.rutaCompleta }}",
              "type": "string"
            },
            {
              "id": "bfb2c69a-1561-4522-bf2f-30df6ce7c823",
              "name": "name",
              "value": "={{ $json.nombre }}",
              "type": "string"
            },
            {
              "id": "08cb5971-1507-44b7-8aba-50108fd46719",
              "name": "text",
              "value": "={{ $json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -896,
        -288
      ],
      "id": "4a1788be-4529-4301-8a15-1655ffcd036a",
      "name": "Establecer Texto1"
    },
    {
      "parameters": {
        "description": "=Llama a esta herramienta para crear la informacion total de los productos, pasa los datos como De_que_trata_el_producto, precio, nombre del producto y caracteristicas para crear el producto, debe ser un producto totalmente profesional! ",
        "workflowId": {
          "__rl": true,
          "value": "nDYphNM8xLTjjJrD",
          "mode": "list",
          "cachedResultUrl": "/workflow/nDYphNM8xLTjjJrD",
          "cachedResultName": "ğŸ¤ªCreador de productos_Sub agente 2.0"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "De_que_trata_el_producto": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('De_que_trata_el_producto', ``, 'string') }}",
            "precio": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('precio', ``, 'string') }}",
            "nombre_producto": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre_producto', ``, 'string') }}",
            "caracteristicas": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('caracteristicas', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "De_que_trata_el_producto",
              "displayName": "De_que_trata_el_producto",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "precio",
              "displayName": "precio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "nombre_producto",
              "displayName": "nombre_producto",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "caracteristicas",
              "displayName": "caracteristicas",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        -656,
        352
      ],
      "id": "83be7957-797e-4642-8d74-25ab731d53a5",
      "name": "creador_de_productos"
    },
    {
      "parameters": {
        "operation": "getAll",
        "tableId": "categorias",
        "returnAll": true
      },
      "type": "n8n-nodes-base.supabaseTool",
      "typeVersion": 1,
      "position": [
        -1280,
        352
      ],
      "id": "4535bdcf-d405-48be-8abd-d61766b0cfde",
      "name": "consultar_categorias1",
      "credentials": {
        "supabaseApi": {
          "id": "W8gqsCw5s1YHm5SZ",
          "name": "Supabase Me LLEVO ESTO"
        }
      }
    },
    {
      "parameters": {
        "toolDescription": "Busca archivos en Supabase Storage bucket imagenes. Lee TODAS las carpetas sin restricciÃ³n de prefix. Retorna array de objetos con: name, id, created_at, updated_at, metadata.",
        "method": "POST",
        "url": "https://rrmafdbxvimmvcerwguy.supabase.co/storage/v1/object/list/imagenes",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "supabaseApi",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "prefix"
            },
            {
              "name": "limit",
              "value": "1000"
            },
            {
              "name": "offset",
              "value": "0"
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "neverError": true,
              "responseFormat": "json"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        208,
        352
      ],
      "id": "69417ffc-95b5-4d69-b6db-5e648ca44cce",
      "name": "Buscar Imagenes sin editar1",
      "credentials": {
        "supabaseApi": {
          "id": "W8gqsCw5s1YHm5SZ",
          "name": "Supabase Me LLEVO ESTO"
        }
      }
    },
    {
      "parameters": {
        "resource": "file",
        "fileId": "={{ $json.message.voice.file_id }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        -1488,
        -512
      ],
      "id": "5c251e58-ea36-4001-8d2b-7ad7b86d3b72",
      "name": "descargar nota de voz1",
      "webhookId": "029d6ce3-3126-4169-8e5e-f13a95988e7f",
      "credentials": {
        "telegramApi": {
          "id": "Tsll6EFLsILnT8d3",
          "name": "Chat NANO BOT"
        }
      }
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "translate",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        -1104,
        -512
      ],
      "id": "3ca00e65-ec1c-4423-b1a4-4f58a7aa9ba8",
      "name": "Translate a recording1",
      "credentials": {
        "openAiApi": {
          "id": "7T43mFUrWSK1b37h",
          "name": "Nueva OPENAI"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "a6bca813-4342-429e-bf78-032aaa7b3ba0",
              "name": "message.text",
              "value": "={{ $json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -896,
        -512
      ],
      "id": "5b7bf4d1-03b1-43e7-9e8b-6e05f4f08fb8",
      "name": "text"
    },
    {
      "parameters": {
        "description": "ğŸ–¼ï¸ EDITAR IMAGEN - PROTOCOLO ESTRICTO OBLIGATORIO\n\nğŸš¨ REGLAS CRÃTICAS ANTES DE USAR ESTA HERRAMIENTA:\n\n1. **NUNCA USAR SIN PREPARACIÃ“N PREVIA** - Esta herramienta SOLO se ejecuta despuÃ©s de completar TODOS los pasos obligatorios\n\n2. **PASO OBLIGATORIO 1 - BUSCAR IMAGEN REAL:**\n   - SIEMPRE usar 'Buscar Archivos Originales' PRIMERO\n   - Obtener: ID real, nombre real (.jpg), URL completa real\n   - NUNCA continuar sin estos datos reales\n\n3. **PASO OBLIGATORIO 2 - CONSULTAR PRODUCTO REAL:**\n   - SIEMPRE usar 'consultar_productos' con nombre EXACTO del producto\n   - Obtener UUID real del producto de la base de datos\n   - NUNCA inventar o asumir el id_del_producto\n   - EJEMPLO: Si es para 'Camiseta Azul', consultar exactamente 'Camiseta Azul'\n\n4. **PASO OBLIGATORIO 3 - CONSULTAR CONTENIDO (SI ES IMAGEN TEMÃTICA):**\n   - Para PUNTOS DE DOLOR: Consultar quÃ© dice en 'puntos_de_dolor' del producto\n   - Para CARACTERÃSTICAS: Consultar caracterÃ­sticas especÃ­ficas del producto\n   - Para TESTIMONIOS: Consultar contenido de testimonios\n   - Generar prompt basado en contenido REAL consultado\n\n5. **FORMATO URL CORRECTO:**\n   - URL exacta: https://rrmafdbxvimmvcerwguy.supabase.co/storage/v1/object/public/imagenes/nombre-real.jpg\n   - NUNCA duplicar 'imagenes' en la URL\n   - Usar SOLO el nombre real obtenido con 'Buscar Archivos Originales'\n\nğŸš¨ ESTA HERRAMIENTA SE EJECUTA SOLO DESPUÃ‰S DE COMPLETAR TODOS LOS PASOS ANTERIORES",
        "workflowId": {
          "__rl": true,
          "value": "jQoi0yBKSPgGJVdx",
          "mode": "list",
          "cachedResultUrl": "/workflow/jQoi0yBKSPgGJVdx",
          "cachedResultName": "Editar Imagenes Supabase"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "tipo_de_imagen": "={{ $fromAI('tipo_de_imagen', `Tipo de imagen (ej: imagen_principal, imagen_punto_dolor_1)`, 'string') }}",
            "PromtParaEditarLaImagen": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('PromtParaEditarLaImagen', `ğŸš¨ PROMPT OBLIGATORIO BASADO EN CONTENIDO REAL: Si es imagen temÃ¡tica (puntos de dolor, caracterÃ­sticas, testimonios), PRIMERO consultar el contenido especÃ­fico del producto usando 'consultar_productos' y generar el prompt basado en esa informaciÃ³n REAL. Para otras imÃ¡genes, crear prompt detallado, descriptivo y realista. SIEMPRE en espaÃ±ol sin fallas.`, 'string') }}",
            "IdDeLaImagen": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('IdDeLaImagen', `ğŸš¨ ID REAL OBLIGATORIO: NUNCA inventar este ID. SIEMPRE obtener usando 'Buscar Archivos Originales' PRIMERO. Este debe ser el ID real de la imagen en Supabase.`, 'string') }}",
            "id_del_producto": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('id_del_producto', `ğŸš¨ UUID REAL OBLIGATORIO: NUNCA inventar este UUID. SIEMPRE usar 'consultar_productos' con el nombre EXACTO del producto ANTES de usar esta herramienta. Obtener el UUID real de la base de datos. EJEMPLO: Si es para 'Camiseta Azul', consultar exactamente 'Camiseta Azul' primero.`, 'string') }}",
            "url_de_la_imagen": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('url_de_la_imagen', `ğŸš¨ URL REAL OBLIGATORIA: NUNCA inventar esta URL. SIEMPRE usar 'Buscar Archivos Originales' PRIMERO para obtener la URL real completa. Formato correcto: https://rrmafdbxvimmvcerwguy.supabase.co/storage/v1/object/public/imagenes/nombre-real.jpg - NO duplicar 'imagenes' en la URL. Usar SOLO el nombre real terminado en .jpg obtenido de la herramienta de bÃºsqueda.`, 'string') }}",
            "nombre_para_la_nueva_imagen": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nombre_para_la_nueva_imagen', `el nombre para la nueva imagen sin espacios , sin tildes, sin mayusculas, sin \"Ã±\" por ejemplo : nueva-imagen , siempre crea nombres diferentes para cada imagen por favor, en cada ejecucion cambia el nombre de la imagen por favor siempre varia los nombres nunca los repitas`, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "PromtParaEditarLaImagen",
              "displayName": "PromtParaEditarLaImagen",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "IdDeLaImagen",
              "displayName": "IdDeLaImagen",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "tipo_de_imagen",
              "displayName": "tipo_de_imagen",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "id_del_producto",
              "displayName": "id_del_producto",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "nombre_para_la_nueva_imagen",
              "displayName": "nombre_para_la_nueva_imagen",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "url_de_la_imagen",
              "displayName": "url_de_la_imagen",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        -128,
        352
      ],
      "id": "c3b6cdbb-7024-484f-ba3e-9c155add7bc7",
      "name": "editar_imagen2"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Disparador de Telegram').item.json.message.chat.id }}",
        "tableName": "chats_telegram_principal",
        "contextWindowLength": 8
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        -1456,
        352
      ],
      "id": "1210ef41-6d9d-4ce4-8cfd-53b6ff1469cc",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "SQbjeiNAyY3q7eu9",
          "name": "Postgrest Me Llevo Esto"
        }
      }
    },
    {
      "parameters": {
        "description": "ğŸš¨ HERRAMIENTA CRÃTICA PARA ACTUALIZAR PRODUCTOS ğŸš¨\n\nREGLAS OBLIGATORIAS:\n1. âœ… SIEMPRE consultar consultar_productos ANTES de actualizar\n2. âœ… CONFIRMAR datos reales del producto con el usuario\n3. âœ… Para puntos_dolor: SOLO usar iconos de caras bÃ¡sicos (ğŸ˜€ğŸ˜ƒğŸ˜„ğŸ˜ğŸ˜ŠğŸ˜ğŸ˜˜ğŸ˜—ğŸ˜™ğŸ˜šğŸ˜‹ğŸ˜›ğŸ˜ğŸ˜œğŸ¤ªğŸ¤¨ğŸ§ğŸ¤“ğŸ˜ğŸ¤©ğŸ¥³ğŸ˜ğŸ˜’ğŸ˜ğŸ˜”ğŸ˜ŸğŸ˜•ğŸ™ğŸ˜£ğŸ˜–ğŸ˜«ğŸ˜©ğŸ¥ºğŸ˜¢ğŸ˜­ğŸ˜¤ğŸ˜ ğŸ˜¡ğŸ¤¬ğŸ¤¯ğŸ˜³ğŸ¥µğŸ¥¶ğŸ˜±ğŸ˜¨ğŸ˜°ğŸ˜¥ğŸ˜“ğŸ¤—ğŸ¤”ğŸ¤­ğŸ¤«ğŸ¤¥ğŸ˜¶ğŸ˜ğŸ˜‘ğŸ˜¬ğŸ™„ğŸ˜¯ğŸ˜¦ğŸ˜§ğŸ˜®ğŸ˜²ğŸ¥±ğŸ˜´ğŸ¤¤ğŸ˜ªğŸ˜µğŸ¤ğŸ¥´ğŸ¤¢ğŸ¤®ğŸ¤§ğŸ˜·ğŸ¤’ğŸ¤•)\n4. âœ… Para puntos_dolor: textoBoton DEBE variar: 'VER SOLUCIÃ“N', 'DESCUBRE CÃ“MO', 'CONOCE MÃS', 'SABER MÃS'\n5. âœ… NUNCA usar iconos problemÃ¡ticos: ğŸ”‹ğŸ”’ğŸ’”ğŸš«ğŸ’§âš¡ğŸ›¡ï¸ğŸ“±ğŸ’»ğŸ®ğŸ¯\n6. âœ… SIEMPRE devolver objeto completo JSON para campos complejos",
        "workflowId": {
          "__rl": true,
          "value": "ioOUYjzmWWHeH5oc",
          "mode": "list",
          "cachedResultUrl": "/workflow/ioOUYjzmWWHeH5oc",
          "cachedResultName": "ğŸï¸Actualizador_de_productos"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "id_del_producto_para_actualizar": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('id_del_producto_para_actualizar', `El ID real del producto, consultado en la herramienta llamada consultar_productos`, 'string') }}",
            "campo_a_actualizar": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('campo_a_actualizar', `Cambo de la tabla exacto que se desea actualizar, por ejemplo: nombre, descripcion, puntos de dolor, testimonios.... Consultar la herramienta CONSULTAR PRODUCTOS, para obtener el valor real que se desea modificar`, 'string') }}",
            "nuevo_valor": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('nuevo_valor', `ğŸš¨ INFORMACIÃ“N PARA REEMPLAZAR EL VALOR ğŸš¨\n\nPara puntos_dolor:\n- âœ… OBJETO JSON COMPLETO con titulo, timeline (4 elementos), subtitulo\n- âœ… Iconos SOLO de caras bÃ¡sicas: ğŸ˜€ğŸ˜ƒğŸ˜„ğŸ˜ğŸ˜ŠğŸ˜ğŸ˜˜ğŸ˜—ğŸ˜™ğŸ˜šğŸ˜‹ğŸ˜›ğŸ˜ğŸ˜œğŸ¤ªğŸ¤¨ğŸ§ğŸ¤“ğŸ˜ğŸ¤©ğŸ¥³ğŸ˜ğŸ˜’ğŸ˜ğŸ˜”ğŸ˜ŸğŸ˜•ğŸ™ğŸ˜£ğŸ˜–ğŸ˜«ğŸ˜©ğŸ¥ºğŸ˜¢ğŸ˜­ğŸ˜¤ğŸ˜ ğŸ˜¡ğŸ¤¬ğŸ¤¯ğŸ˜³ğŸ¥µğŸ¥¶ğŸ˜±ğŸ˜¨ğŸ˜°ğŸ˜¥ğŸ˜“ğŸ¤—ğŸ¤”ğŸ¤­ğŸ¤«ğŸ¤¥ğŸ˜¶ğŸ˜ğŸ˜‘ğŸ˜¬ğŸ™„ğŸ˜¯ğŸ˜¦ğŸ˜§ğŸ˜®ğŸ˜²ğŸ¥±ğŸ˜´ğŸ¤¤ğŸ˜ªğŸ˜µğŸ¤ğŸ¥´ğŸ¤¢ğŸ¤®ğŸ¤§ğŸ˜·ğŸ¤’ğŸ¤•\n- âœ… textoBoton variado: VER SOLUCIÃ“N, DESCUBRE CÃ“MO, CONOCE MÃS, SABER MÃS\n- âŒ NUNCA usar: ğŸ”‹ğŸ”’ğŸ’”ğŸš«ğŸ’§âš¡ğŸ›¡ï¸ğŸ“±ğŸ’»ğŸ®ğŸ¯\n- âŒ NUNCA solo el array timeline\n- âŒ NUNCA string escapado\n\nPara otros campos: informaciÃ³n normal de reemplazo`, 'string') }}",
            "tipo_actualizacion": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('tipo_actualizacion', `Que se desea actualizar. \nUn producto o imagen, si es producto solo devolver la respuesta \"producto\" y si es imagen solo devolver \"imagen\"`, 'string') }}",
            "de_que_trata_el_producto": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('de_que_trata_el_producto', `Breve descripcion de que trata el producto`, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "id_del_producto_para_actualizar",
              "displayName": "id_del_producto_para_actualizar",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "campo_a_actualizar",
              "displayName": "campo_a_actualizar",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "nuevo_valor",
              "displayName": "nuevo_valor",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "tipo_actualizacion",
              "displayName": "tipo_actualizacion",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "de_que_trata_el_producto",
              "displayName": "de_que_trata_el_producto",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        -480,
        352
      ],
      "id": "df5f480a-1f8e-4a9d-a8cb-c8f69b6a3914",
      "name": "Actualizador_de_productos"
    },
    {
      "parameters": {
        "toolDescription": "RENOMBRA las imagenes que tenemos en SUPABASE",
        "method": "POST",
        "url": "https://rrmafdbxvimmvcerwguy.supabase.co/storage/v1/object/move",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "supabaseApi",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "bucketId",
              "value": "imagenes"
            },
            {
              "name": "sourceKey",
              "value": "={{ $fromAI('oldPath', '', 'string').replace(/^imagenes\\//gi, '').replace(/\\s+/g, '-') }}"
            },
            {
              "name": "destinationKey",
              "value": "={{ $fromAI('newPath', '', 'string').replace(/^imagenes\\//gi, '').replace(/\\s+/g, '-') }}"
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        32,
        352
      ],
      "id": "5a8a7b93-f91b-4dcd-9b1d-e0f42936a63c",
      "name": "renombrar_archivo_supabase",
      "credentials": {
        "supabaseApi": {
          "id": "W8gqsCw5s1YHm5SZ",
          "name": "Supabase Me LLEVO ESTO"
        }
      }
    },
    {
      "parameters": {
        "description": "Usa esta herramienta para cuando el usuario necesite crear un articulo del blog, realiza las preguntas necesarias para qe se cree",
        "workflowId": {
          "__rl": true,
          "value": "yXZKyDLtZzeDRvsd",
          "mode": "list",
          "cachedResultUrl": "/workflow/yXZKyDLtZzeDRvsd",
          "cachedResultName": "CreadorDeArticulos"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "TituloDelBlog": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('TituloDelBlog', ``, 'string') }}",
            "TipoDeConrtenido": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('TipoDeConrtenido', ``, 'string') }}",
            "CuantasImagenes": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('CuantasImagenes', ``, 'string') }}",
            "tamaÃ±oDelArticulo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('tama_oDelArticulo', ``, 'string') }}",
            "TeQueTrataElArticulo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('TeQueTrataElArticulo', ``, 'string') }}",
            "ContextoDelArticulo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('ContextoDelArticulo', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "TeQueTrataElArticulo",
              "displayName": "TeQueTrataElArticulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "tamaÃ±oDelArticulo",
              "displayName": "tamaÃ±oDelArticulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "CuantasImagenes",
              "displayName": "CuantasImagenes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "TipoDeConrtenido",
              "displayName": "TipoDeConrtenido",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "TituloDelBlog",
              "displayName": "TituloDelBlog",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "ContextoDelArticulo",
              "displayName": "ContextoDelArticulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        432,
        352
      ],
      "id": "22c241a8-13c8-45bb-bf84-81361416eb26",
      "name": "Creador De Articulos"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -1888,
        288
      ],
      "id": "fe38629d-41e3-4ef0-bee2-63a134a6d467",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "afEdUlo465aPlyDq",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -2080,
        272
      ],
      "id": "eff9bc90-c3c7-4ce6-bbec-ed5dff6fad41",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "afEdUlo465aPlyDq",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "operation": "getAll",
        "tableId": "productos",
        "returnAll": true
      },
      "type": "n8n-nodes-base.supabaseTool",
      "typeVersion": 1,
      "position": [
        -1056,
        352
      ],
      "id": "f4039f44-b81f-4569-bad9-c6fd88be68f6",
      "name": "consultar_productos",
      "credentials": {
        "supabaseApi": {
          "id": "W8gqsCw5s1YHm5SZ",
          "name": "Supabase Me LLEVO ESTO"
        }
      }
    },
    {
      "parameters": {
        "operation": "getAll",
        "tableId": "producto_imagenes",
        "returnAll": true,
        "filters": {
          "conditions": [
            {
              "keyName": "producto_id",
              "condition": "eq",
              "keyValue": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('conditions0_Field_Value', ``, 'string') }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabaseTool",
      "typeVersion": 1,
      "position": [
        -848,
        352
      ],
      "id": "e3577ea0-7ece-4173-b6d0-1119479ec5d4",
      "name": "consultar_imagenes_producto",
      "credentials": {
        "supabaseApi": {
          "id": "W8gqsCw5s1YHm5SZ",
          "name": "Supabase Me LLEVO ESTO"
        }
      }
    }
  ],
  "connections": {
    "Procesar Info Upload": {
      "main": [
        [
          {
            "node": "Establecer Texto1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "combinar_imagenes1": {
      "ai_tool": [
        [
          {
            "node": "Agente Google",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Subir a Supabase": {
      "main": [
        [
          {
            "node": "Procesar Info Upload",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Agente Google": {
      "main": [
        [
          {
            "node": "Responder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Descargar Archivo": {
      "main": [
        [
          {
            "node": "Subir a Supabase",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Conmutador": {
      "main": [
        [
          {
            "node": "descargar nota de voz1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Descargar Archivo",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Agente Google",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Disparador de Telegram": {
      "main": [
        [
          {
            "node": "Conmutador",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Establecer Texto1": {
      "main": [
        [
          {
            "node": "Agente Google",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "creador_de_productos": {
      "ai_tool": [
        [
          {
            "node": "Agente Google",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "consultar_categorias1": {
      "ai_tool": [
        [
          {
            "node": "Agente Google",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Buscar Imagenes sin editar1": {
      "ai_tool": [
        [
          {
            "node": "Agente Google",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "descargar nota de voz1": {
      "main": [
        [
          {
            "node": "Translate a recording1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Translate a recording1": {
      "main": [
        [
          {
            "node": "text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "text": {
      "main": [
        [
          {
            "node": "Agente Google",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "editar_imagen2": {
      "ai_tool": [
        [
          {
            "node": "Agente Google",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "Agente Google",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Actualizador_de_productos": {
      "ai_tool": [
        [
          {
            "node": "Agente Google",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "renombrar_archivo_supabase": {
      "ai_tool": [
        [
          {
            "node": "Agente Google",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Creador De Articulos": {
      "ai_tool": [
        [
          {
            "node": "Agente Google",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Agente Google",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Agente Google",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "consultar_productos": {
      "ai_tool": [
        [
          {
            "node": "Agente Google",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "consultar_imagenes_producto": {
      "ai_tool": [
        [
          {
            "node": "Agente Google",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "8000b702e0a3d9ac6d70099a2751603316de4028cd14af0949776a26efecb219"
  }
}