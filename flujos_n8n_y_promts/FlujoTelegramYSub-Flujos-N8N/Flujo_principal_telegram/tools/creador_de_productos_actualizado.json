{
  "nodes": [
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        592,
        352
      ],
      "id": "6ab70fc1-e352-4547-967a-146cbf255ade",
      "name": "OpenAI Chat Model2",
      "credentials": {
        "openAiApi": {
          "id": "7T43mFUrWSK1b37h",
          "name": "Nueva OPENAI"
        }
      }
    },
    {
      "parameters": {
        "operation": "getAll",
        "tableId": "categorias",
        "returnAll": true
      },
      "type": "n8n-nodes-base.supabaseTool",
      "typeVersion": 1,
      "position": [
        976,
        352
      ],
      "id": "7eee7589-d76b-429d-b56c-a1f6ef8aeb12",
      "name": "consultar_categorias",
      "credentials": {
        "supabaseApi": {
          "id": "W8gqsCw5s1YHm5SZ",
          "name": "Supabase Me LLEVO ESTO"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=El usuario necesita crear un producto que se llama {{ $json.nombre_producto }} debes crear todo el producto, todo totalmente funcional, el producto trata sobre {{ $json.De_que_trata_el_producto }} y el precio es de {{ $json.precio }} y las caracteristicas son estas {{ $json.caracteristicas }}",
        "needsFallback": true,
        "options": {
          "systemMessage": "=# ðŸš€ PROMPT PARA CREAR PRODUCTOS CON FORMATO CORRECTO\n\n## ðŸ“‹ INSTRUCCIONES OBLIGATORIAS\n\nEres un experto creador de productos para e-commerce. Debes generar el JSON EXACTAMENTE con esta estructura, sin agregar ni quitar campos:\n\n## ðŸ“¦ ESTRUCTURA JSON OBLIGATORIA\n\n```json\n{\n  \"nombre\": \"[NOMBRE DEL PRODUCTO]\",\n  \"descripcion\": \"[DESCRIPCIÃ“N BREVE Y ATRACTIVA]\",\n  \"precio\": [PRECIO EN PESOS COLOMBIANOS],\n  \"precio_original\": [PRECIO ORIGINAL PARA MOSTRAR DESCUENTO],\n  \n  // ðŸ”¥ CARACTERÃSTICAS PRINCIPALES (MÃXIMO 4 PARA EL HERO)\n  \"caracteristicas\": {\n    \"titulo\": \"CaracterÃ­sticas Destacadas\",\n    \"subtitulo\": \"Descubre por quÃ© este producto es tu mejor elecciÃ³n\",\n    \"detalles\": [\n      {\n        \"id\": 1,\n        \"icono\": \"[EMOJI RELEVANTE]\",\n        \"titulo\": \"[TÃTULO CARACTERÃSTICA 1]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DETALLADA DE LA CARACTERÃSTICA]\"\n      },\n      {\n        \"id\": 2,\n        \"icono\": \"[EMOJI RELEVANTE]\",\n        \"titulo\": \"[TÃTULO CARACTERÃSTICA 2]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DETALLADA DE LA CARACTERÃSTICA]\"\n      },\n      {\n        \"id\": 3,\n        \"icono\": \"[EMOJI RELEVANTE]\",\n        \"titulo\": \"[TÃTULO CARACTERÃSTICA 3]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DETALLADA DE LA CARACTERÃSTICA]\"\n      },\n      {\n        \"id\": 4,\n        \"icono\": \"[EMOJI RELEVANTE]\",\n        \"titulo\": \"[TÃTULO CARACTERÃSTICA 4]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DETALLADA DE LA CARACTERÃSTICA]\"\n      }\n    ]\n  },\n  \n  // ðŸ”¥ VENTAJAS (COLUMNA IZQUIERDA EN CARACTERISTICASTEMU)\n  \"ventajas\": {\n    \"titulo\": \"Â¿Por quÃ© elegir este producto?\",\n    \"subtitulo\": \"Descubre las ventajas que lo hacen Ãºnico\",\n    \"items\": [\n      {\n        \"id\": 1,\n        \"icono\": \"[EMOJI PROBLEMA]\",\n        \"titulo\": \"[PROBLEMA QUE SOLUCIONA 1]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DEL PROBLEMA]\"\n      },\n      {\n        \"id\": 2,\n        \"icono\": \"[EMOJI PROBLEMA]\",\n        \"titulo\": \"[PROBLEMA QUE SOLUCIONA 2]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DEL PROBLEMA]\"\n      },\n      {\n        \"id\": 3,\n        \"icono\": \"[EMOJI SOLUCIÃ“N]\",\n        \"titulo\": \"[SOLUCIÃ“N QUE OFRECE]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DE LA SOLUCIÃ“N]\"\n      }\n    ]\n  },\n  \n  // ðŸ”¥ BENEFICIOS (COLUMNA DERECHA EN CARACTERISTICASTEMU)\n  \"beneficios\": {\n    \"titulo\": \"Beneficios Exclusivos\",\n    \"subtitulo\": \"Todo lo que obtienes al elegirnos\",\n    \"items\": [\n      {\n        \"id\": 1,\n        \"icono\": \"ðŸ›¡ï¸\",\n        \"titulo\": \"[BENEFICIO 1]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DEL BENEFICIO]\"\n      },\n      {\n        \"id\": 2,\n        \"icono\": \"ðŸšš\",\n        \"titulo\": \"[BENEFICIO 2]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DEL BENEFICIO]\"\n      },\n      {\n        \"id\": 3,\n        \"icono\": \"ðŸ’°\",\n        \"titulo\": \"[BENEFICIO 3]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DEL BENEFICIO]\"\n      }\n    ]\n  },\n  \n  // ðŸ”¥ ESPECIFICACIONES TÃ‰CNICAS\n  \"especificaciones\": {\n    \"marca\": \"[MARCA]\",\n    \"modelo\": \"[MODELO]\",\n    \"material\": \"[MATERIAL]\",\n    \"color\": \"[COLOR]\",\n    \"talla\": \"[TALLA]\",\n    \"peso\": \"[PESO EN KG]\",\n    \"garantia_meses\": [MESES DE GARANTÃA],\n    \"origen_pais\": \"[PAÃS DE ORIGEN]\",\n    \"dimensiones\": \"[DIMENSIONES EN CM]\"\n  },\n  \n  // ðŸ”¥ IMÃGENES\n  \"imagenes\": {\n    \"principal\": \"[URL IMAGEN PRINCIPAL]\",\n    \"galeria\": [\n      \"[URL IMAGEN 1]\",\n      \"[URL IMAGEN 2]\",\n      \"[URL IMAGEN 3]\"\n    ],\n    \"imagen_caracteristicas\": \"[URL IMAGEN PARA SECCIÃ“N CARACTERÃSTICAS]\"\n  },\n  \n  // ðŸ”¥ PUNTOS DE DOLOR\n  \"puntos_dolor\": {\n    \"titulo\": \"Â¿Te sientes identificado con estos problemas?\",\n    \"items\": [\n      {\n        \"id\": 1,\n        \"icono\": \"[EMOJI]\",\n        \"titulo\": \"[PROBLEMA 1]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DEL PROBLEMA]\",\n        \"solucion\": \"[SOLUCIÃ“N QUE OFRECE TU PRODUCTO]\",\n        \"textoBoton\": \"[TEXTO ESPECÃFICO DEL BOTÃ“N]\"\n      },\n      {\n        \"id\": 2,\n        \"icono\": \"[EMOJI]\",\n        \"titulo\": \"[PROBLEMA 2]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DEL PROBLEMA]\",\n        \"solucion\": \"[SOLUCIÃ“N QUE OFRECE TU PRODUCTO]\",\n        \"textoBoton\": \"[TEXTO ESPECÃFICO DEL BOTÃ“N]\"\n      },\n      {\n        \"id\": 3,\n        \"icono\": \"[EMOJI]\",\n        \"titulo\": \"[PROBLEMA 3]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DEL PROBLEMA]\",\n        \"solucion\": \"[SOLUCIÃ“N QUE OFRECE TU PRODUCTO]\",\n        \"textoBoton\": \"[TEXTO ESPECÃFICO DEL BOTÃ“N]\"\n      }\n    ]\n  },\n  \n  // ðŸ”¥ TESTIMONIOS\n  \"testimonios\": {\n    \"titulo\": \"Lo que dicen nuestros clientes\",\n    \"items\": [\n      {\n        \"id\": 1,\n        \"nombre\": \"[NOMBRE CLIENTE]\",\n        \"ciudad\": \"[CIUDAD]\",\n        \"calificacion\": 5,\n        \"texto\": \"[TESTIMONIO POSITIVO]\",\n        \"fecha\": \"[FECHA]\"\n      },\n      {\n        \"id\": 2,\n        \"nombre\": \"[NOMBRE CLIENTE]\",\n        \"ciudad\": \"[CIUDAD]\",\n        \"calificacion\": 5,\n        \"texto\": \"[TESTIMONIO POSITIVO]\",\n        \"fecha\": \"[FECHA]\"\n      }\n    ]\n  },\n  \n  // ðŸ”¥ GARANTÃAS\n  \"garantias\": {\n    \"titulo\": \"GarantÃ­a y Soporte\",\n    \"items\": [\n      {\n        \"id\": 1,\n        \"icono\": \"ðŸ›¡ï¸\",\n        \"titulo\": \"[GARANTÃA 1]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DE LA GARANTÃA]\"\n      },\n      {\n        \"id\": 2,\n        \"icono\": \"ðŸ“ž\",\n        \"titulo\": \"[GARANTÃA 2]\",\n        \"descripcion\": \"[DESCRIPCIÃ“N DE LA GARANTÃA]\"\n      }\n    ]\n  },\n  \n  // ðŸ”¥ PREGUNTAS FRECUENTES\n  \"faq\": {\n    \"titulo\": \"Preguntas Frecuentes\",\n    \"items\": [\n      {\n        \"id\": 1,\n        \"pregunta\": \"[PREGUNTA FRECUENTE 1]\",\n        \"respuesta\": \"[RESPUESTA DETALLADA]\"\n      },\n      {\n        \"id\": 2,\n        \"pregunta\": \"[PREGUNTA FRECUENTE 2]\",\n        \"respuesta\": \"[RESPUESTA DETALLADA]\"\n      }\n    ]\n  },\n  \n  // ðŸ”¥ LLAMADO A LA ACCIÃ“N\n  \"cta\": {\n    \"texto\": \"[TEXTO PRINCIPAL DEL BOTÃ“N]\",\n    \"subtexto\": \"[SUBTEXTO CON URGENCIA O BENEFICIO]\"\n  }\n}\n```\n\n## ðŸŽ¯ REGLAS ESPECÃFICAS POR TIPO DE PRODUCTO\n\n### ðŸï¸ PARA VEHÃCULOS (Motos/Autos)\n- **CaracterÃ­sticas**: EnfÃ³cate en motor, rendimiento, tecnologÃ­a, seguridad\n- **Ventajas**: Problemas de transporte, eficiencia, comodidad\n- **Beneficios**: GarantÃ­a mecÃ¡nica, mantenimiento, documentaciÃ³n\n- **Testimonios**: Sobre la experiencia de compra y el vendedor\n- **GarantÃ­as**: MecÃ¡nica, revisiÃ³n tÃ©cnica, soporte post-venta\n- **NO INCLUYAS**: \"EnvÃ­o gratis\" o \"Entrega en 24 horas\"\n\n### ðŸ’Ž PARA PRODUCTOS DE ALTO VALOR\n- **CaracterÃ­sticas**: Calidad premium, materiales exclusivos, durabilidad\n- **Ventajas**: Problemas de productos genÃ©ricos, inversiÃ³n a largo plazo\n- **Beneficios**: GarantÃ­a extendida, servicio premium, soporte especializado\n- **Testimonios**: Sobre la calidad y durabilidad\n- **GarantÃ­as**: Extendidas, servicio a domicilio, reemplazo inmediato\n\n### ðŸ”„ PARA PRODUCTOS USADOS/SEMI-NUEVOS\n- **CaracterÃ­sticas**: Estado real, condiciones honestas, certificaciÃ³n\n- **Ventajas**: Precio accesible, buen estado, revisiÃ³n completa\n- **Beneficios**: GarantÃ­a limitada, revisiÃ³n pre-compra, transparencia total\n- **Testimonios**: Sobre la honestidad del vendedor y estado real\n- **GarantÃ­as**: Limitadas, revisiÃ³n tÃ©cnica, devoluciÃ³n en 7 dÃ­as\n\n## ðŸš¨ REGLAS CRÃTICAS\n\n1. **MÃXIMO 4 CARACTERÃSTICAS** en `caracteristicas.detalles`\n2. **MÃXIMO 3 VENTAJAS** en `ventajas.items`\n3. **MÃXIMO 3 BENEFICIOS** en `beneficios.items`\n4. **TEXTO BOTÃ“N ESPECÃFICO** en `puntos_dolor.items.textoBoton` - NUNCA uses \"MÃ¡s informaciÃ³n aquÃ­\"\n5. **TESTIMONIOS REALES** segÃºn el tipo de producto\n6. **GARANTÃAS ADECUADAS** al tipo y valor del producto\n\n## ðŸ“ EJEMPLO DE SALIDA\n\n```json\n{\n  \"nombre\": \"DR 200 - Motocicleta de Alto Rendimiento\",\n  \"descripcion\": \"Potente motocicleta 200cc con tecnologÃ­a EFI para mÃ¡ximo rendimiento\",\n  \"precio\": 8500000,\n  \"precio_original\": 9500000,\n  \n  \"caracteristicas\": {\n    \"titulo\": \"CaracterÃ­sticas Destacadas\",\n    \"subtitulo\": \"Descubre por quÃ© esta moto es tu mejor elecciÃ³n\",\n    \"detalles\": [\n      {\n        \"id\": 1,\n        \"icono\": \"ðŸï¸\",\n        \"titulo\": \"Motor Potente 200cc\",\n        \"descripcion\": \"Motor de alta eficiencia con tecnologÃ­a avanzada para mÃ¡ximo rendimiento\"\n      },\n      {\n        \"id\": 2,\n        \"icono\": \"âš¡\",\n        \"titulo\": \"TecnologÃ­a EFI\",\n        \"descripcion\": \"InyecciÃ³n electrÃ³nica para arranque instantÃ¡neo y consumo optimizado\"\n      },\n      {\n        \"id\": 3,\n        \"icono\": \"ðŸ›¡ï¸\",\n        \"titulo\": \"DiseÃ±o Robusto\",\n        \"descripcion\": \"Chasis reforzado y componentes premium para mayor durabilidad\"\n      },\n      {\n        \"id\": 4,\n        \"icono\": \"ðŸ’º\",\n        \"titulo\": \"Comodidad Superior\",\n        \"descripcion\": \"Asiento ergonÃ³mico y suspensiÃ³n avanzada para viajes largos\"\n      }\n    ]\n  },\n  \n  \"ventajas\": {\n    \"titulo\": \"Â¿Por quÃ© elegir la DR 200?\",\n    \"subtitulo\": \"Descubre las ventajas que la hacen Ãºnica\",\n    \"items\": [\n      {\n        \"id\": 1,\n        \"icono\": \"ðŸ’”\",\n        \"titulo\": \"Problema: Rendimiento ineficiente\",\n        \"descripcion\": \"Motos dÃ©biles que no ofrecen la aceleraciÃ³n que necesitas\"\n      },\n      {\n        \"id\": 2,\n        \"icono\": \"ðŸ˜¤\",\n        \"titulo\": \"Problema: Comodidad insuficiente\",\n        \"descripcion\": \"Montar largas distancias puede ser doloroso sin diseÃ±o ergonÃ³mico\"\n      },\n      {\n        \"id\": 3,\n        \"icono\": \"âœ…\",\n        \"titulo\": \"SoluciÃ³n: Rendimiento eficiente\",\n        \"descripcion\": \"Motor potente diseÃ±ado para cualquier terreno y situaciÃ³n\"\n      }\n    ]\n  },\n  \n  \"beneficios\": {\n    \"titulo\": \"Beneficios Exclusivos\",\n    \"subtitulo\": \"Todo lo que obtienes al elegirnos\",\n    \"items\": [\n      {\n        \"id\": 1,\n        \"icono\": \"ðŸ›¡ï¸\",\n        \"titulo\": \"GarantÃ­a Extendida 12 Meses\",\n        \"descripcion\": \"Cobertura completa en motor y transmisiÃ³n con soporte tÃ©cnico especializado\"\n      },\n      {\n        \"id\": 2,\n        \"icono\": \"ðŸ”§\",\n        \"titulo\": \"Mantenimiento Incluido\",\n        \"descripcion\": \"Primer servicio gratuito y asesorÃ­a permanente de nuestros expertos\"\n      },\n      {\n        \"id\": 3,\n        \"icono\": \"ðŸ“‹\",\n        \"titulo\": \"DocumentaciÃ³n Completa\",\n        \"descripcion\": \"TrÃ¡mite Ã¡gil de matrÃ­cula y toda la documentaciÃ³n al dÃ­a sin complicaciones\"\n      }\n    ]\n  }\n}\n```\n\n## âš¡ IMPORTANTE\n\n**GENERA EL JSON COMPLETO Y FUNCIONAL** con todos los campos mencionados. No omitas ningÃºn campo. Usa datos realistas y coherentes con el producto."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        736,
        0
      ],
      "id": "3722e063-92ba-4e21-b6c2-a8a0616522fa",
      "name": "AI Agent Creador Productos"
    },
    {
      "parameters": {
        "jsCode": "// DETECTOR CORREGIDO - BUSCA JSON DENTRO DE RESPUESTAS CONVERSACIONALES\nconsole.log('ðŸ” ANALIZANDO RESPUESTA DEL AI AGENT');\n\nconst respuestaAgent = $input.first();\nlet respuestaTexto = '';\n\n// Extraer la respuesta del AI Agent\nif (respuestaAgent.json && respuestaAgent.json.output) {\n  respuestaTexto = String(respuestaAgent.json.output).trim();\n} else if (respuestaAgent.json && respuestaAgent.json.text) {\n  respuestaTexto = String(respuestaAgent.json.text).trim();\n} else if (respuestaAgent.json) {\n  respuestaTexto = JSON.stringify(respuestaAgent.json);\n} else {\n  respuestaTexto = String(respuestaAgent).trim();\n}\n\nconsole.log('ðŸ“ Respuesta completa:', respuestaTexto.substring(0, 200) + '...');\nconsole.log('ðŸ“ Longitud:', respuestaTexto.length);\n\n// DETECCIÃ“N ROBUSTA DE JSON DE PRODUCTO\nlet esProductoJSON = false;\nlet objetoProducto = null;\nlet razonDeteccion = '';\n\n// Solo procesar si tiene contenido sustancial\nif (respuestaTexto.length > 50) {\n  \n  // NUEVA LÃ“GICA: Buscar JSON dentro del texto (incluso si hay texto conversacional)\n  let jsonExtraido = null;\n  \n  // MÃ©todo 1: Buscar JSON entre ```json y ```\n  const matchCodeBlock = respuestaTexto.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n  if (matchCodeBlock && matchCodeBlock[1]) {\n    console.log('ðŸ” JSON encontrado en bloque de cÃ³digo');\n    try {\n      jsonExtraido = JSON.parse(matchCodeBlock[1].trim());\n    } catch (error) {\n      console.log('âŒ Error parseando JSON del bloque:', error.message);\n    }\n  }\n  \n  // MÃ©todo 2: Buscar JSON que empiece con { y termine con } (mÃ¡s robusto)\n  if (!jsonExtraido) {\n    const inicioJSON = respuestaTexto.indexOf('{');\n    const finJSON = respuestaTexto.lastIndexOf('}');\n    \n    if (inicioJSON !== -1 && finJSON !== -1 && finJSON > inicioJSON) {\n      const posibleJSON = respuestaTexto.substring(inicioJSON, finJSON + 1);\n      console.log('ðŸ” Posible JSON encontrado en posiciÃ³n', inicioJSON, 'a', finJSON);\n      \n      try {\n        jsonExtraido = JSON.parse(posibleJSON);\n        console.log('âœ… JSON parseado exitosamente');\n      } catch (error) {\n        console.log('âŒ Error parseando JSON extraÃ­do:', error.message);\n      }\n    }\n  }\n  \n  // MÃ©todo 3: Verificar si toda la respuesta es JSON\n  if (!jsonExtraido && respuestaTexto.startsWith('{') && respuestaTexto.endsWith('}')) {\n    try {\n      jsonExtraido = JSON.parse(respuestaTexto);\n      console.log('âœ… Respuesta completa es JSON vÃ¡lido');\n    } catch (error) {\n      console.log('âŒ Error parseando respuesta completa como JSON:', error.message);\n    }\n  }\n  \n  // VALIDAR SI EL JSON EXTRAÃDO ES UN PRODUCTO\n  if (jsonExtraido) {\n    console.log('ðŸ” Validando JSON extraÃ­do...');\n    console.log('   - Tiene nombre:', !!jsonExtraido.nombre);\n    console.log('   - Tiene precio:', jsonExtraido.precio !== undefined);\n    console.log('   - Tiene descripcion:', !!jsonExtraido.descripcion);\n    \n    // Verificar campos mÃ­nimos de producto\n    if (jsonExtraido.nombre && \n        (jsonExtraido.precio !== undefined) && \n        jsonExtraido.descripcion) {\n      \n      esProductoJSON = true;\n      objetoProducto = jsonExtraido;\n      razonDeteccion = 'JSON de producto vÃ¡lido extraÃ­do de respuesta';\n      \n      console.log('âœ… PRODUCTO DETECTADO:', jsonExtraido.nombre);\n      console.log('ðŸ’° Precio:', jsonExtraido.precio);\n      console.log('ðŸ“‹ Campos:', Object.keys(jsonExtraido).length);\n    } else {\n      razonDeteccion = 'JSON encontrado pero faltan campos de producto';\n      console.log('âŒ JSON encontrado pero no es producto vÃ¡lido');\n    }\n  } else {\n    razonDeteccion = 'No se encontrÃ³ JSON vÃ¡lido en la respuesta';\n    console.log('âŒ No se pudo extraer JSON vÃ¡lido');\n  }\n} else {\n  razonDeteccion = 'Respuesta muy corta - conversacional';\n  console.log('ðŸ“ Respuesta muy corta');\n}\n\nconsole.log('ðŸŽ¯ RESULTADO FINAL:');\nconsole.log('   - Es producto:', esProductoJSON);\nconsole.log('   - RazÃ³n:', razonDeteccion);\n\n// IMPORTANTE: El IF espera producto_detectado como STRING \"true\"\nreturn {\n  json: {\n    // Datos originales\n    output: respuestaAgent.json?.output || respuestaTexto,\n    \n    // CAMPO CLAVE PARA EL IF (como string \"true\" o \"false\")\n    producto_detectado: esProductoJSON ? \"true\" : \"false\",\n    \n    // Campos adicionales para informaciÃ³n\n    es_producto_json: esProductoJSON,\n    es_conversacional: !esProductoJSON,\n    tipo_detectado: esProductoJSON ? 'producto_json' : 'conversacional',\n    razon_deteccion: razonDeteccion,\n    \n    // Producto parseado (si existe)\n    producto_objeto: objetoProducto,\n    \n    // Info de debugging\n    longitud_respuesta: respuestaTexto.length,\n    timestamp: new Date().toISOString()\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1040,
        0
      ],
      "id": "a009cba2-be3f-424b-8101-0769f4e54c97",
      "name": "Detector Tipo Respuesta"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "096d96a0-e72e-4339-9068-c3cde014bf46",
              "leftValue": "={{ $json.producto_detectado }}",
              "rightValue": "true",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "0cbb1f10-b081-40e4-b63b-bcd11fb8506c",
              "leftValue": "",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1264,
        0
      ],
      "id": "677274e6-a29c-4e40-a3b8-a2af924b9fc1",
      "name": "If"
    },
    {
      "parameters": {
        "jsCode": "// ðŸ”„ PREPARAR JSON PARA SUPABASE - OBJETOS JSONB VÃLIDOS\nconsole.log('ðŸ”§ PREPARANDO JSON PARA SUPABASE');\n\nconst entrada = $input.first();\nconst producto = entrada.json.producto_procesado || entrada.json.producto || entrada.json;\n\nconsole.log('ðŸ“¥ Producto recibido:', producto?.nombre);\nconsole.log('ðŸ“‹ Campos disponibles:', producto ? Object.keys(producto) : []);\n\n// Utilidad: convertir a string JSON (para columnas antiguas tipo text/json)\nfunction convertirAJsonString(obj) {\n  if (!obj) return null;\n  try {\n    if (typeof obj === 'string') {\n      JSON.parse(obj); // valida string JSON\n      return obj;\n    }\n    return JSON.stringify(obj);\n  } catch (error) {\n    console.log('âŒ Error convirtiendo a JSON string:', error);\n    return null;\n  }\n}\n\n// Utilidad: asegurar objeto JSON vÃ¡lido (para columnas jsonb)\nfunction aObjeto(val, fallback) {\n  try {\n    if (!val) return fallback;\n    if (typeof val === 'string') {\n      const parsed = JSON.parse(val);\n      return parsed && typeof parsed === 'object' ? parsed : fallback;\n    }\n    if (typeof val === 'object') return val;\n    return fallback;\n  } catch (e) {\n    return fallback;\n  }\n}\n\n// Estado seguro (evita violar constraint)\nfunction estadoSeguro(e) {\n  const s = (typeof e === 'string' ? e.trim().toLowerCase() : '');\n  return s && ['nuevo','activo','inactivo','en_revision','borrador'].includes(s) ? s : 'nuevo';\n}\n\n// Defaults para la landing Temu\nconst defaultCaracteristicas = {\n  titulo: 'Â¿Por quÃ© miles de personas eligen nuestro producto?',\n  subtitulo: 'Descubre las caracterÃ­sticas que lo hacen Ãºnico y especial',\n  imagen: '',\n  detalles: [\n    { id: 1, icono: 'âš™ï¸', titulo: 'Material premium', descripcion: 'Resistente y duradero' },\n    { id: 2, icono: 'ðŸ§©', titulo: 'DiseÃ±o inteligente', descripcion: 'ErgonomÃ­a y facilidad de uso' },\n    { id: 3, icono: 'ðŸ”‹', titulo: 'Eficiencia energÃ©tica', descripcion: 'Optimiza consumo sin perder rendimiento' }\n  ],\n  cta: { texto: 'Â¡QUIERO APROVECHAR ESTA OFERTA!', subtexto: 'ðŸ”¥ Oferta por tiempo limitado' }\n};\n\nconst defaultVentajas = {\n  titulo: 'Â¿Por quÃ© elegir este producto?',\n  subtitulo: 'Ventajas clave',\n  items: [\n    { id: 1, icono: 'âœ…', titulo: 'Excelente relaciÃ³n calidad/precio', descripcion: 'Equilibrio ideal entre costo y prestaciones' },\n    { id: 2, icono: 'âš¡', titulo: 'Rendimiento confiable', descripcion: 'Funciona como se espera en uso diario' },\n    { id: 3, icono: 'ðŸ“ˆ', titulo: 'Mejora inmediata', descripcion: 'Resultados visibles desde el primer uso' }\n  ]\n};\n\nconst defaultBeneficios = {\n  titulo: 'Beneficios clave',\n  subtitulo: 'Lo que obtienes al comprar',\n  items: [\n    { id: 1, icono: 'ðŸ›¡ï¸', titulo: 'GarantÃ­a oficial', descripcion: 'Cobertura de satisfacciÃ³n y calidad' },\n    { id: 2, icono: 'ðŸ¤', titulo: 'Soporte dedicado', descripcion: 'AcompaÃ±amiento inicial y guÃ­a de uso' },\n    { id: 3, icono: 'ðŸšš', titulo: 'EnvÃ­o seguro', descripcion: 'Seguimiento y entrega confiable' }\n  ]\n};\n\nfunction asegurarTresItemsBeneficios(obj) {\n  const base = aObjeto(obj, defaultBeneficios);\n  if (!Array.isArray(base.items)) base.items = defaultBeneficios.items;\n  if (base.items.length > 3) base.items = base.items.slice(0, 3);\n  if (base.items.length < 3) {\n    const faltantes = 3 - base.items.length;\n    base.items = base.items.concat(defaultBeneficios.items.slice(0, faltantes));\n  }\n  return base;\n}\n\n// Preparar todos los campos\nconst productoParaSupabase = {\n  // Campos normales\n  nombre: producto?.nombre,\n  slug: producto?.slug,\n  descripcion: producto?.descripcion,\n  ganchos: producto?.ganchos,\n  precio: producto?.precio,\n  precio_original: producto?.precio_original,\n  descuento: producto?.descuento,\n  estado: estadoSeguro(producto?.estado),\n  categoria_id: producto?.categoria_id,\n  stock: producto?.stock,\n  peso: producto?.peso,\n  dimensiones: producto?.dimensiones,\n  marca: producto?.marca,\n  modelo: producto?.modelo,\n  color: producto?.color,\n  talla: producto?.talla,\n  material: producto?.material,\n  garantia_meses: producto?.garantia_meses,\n  origen_pais: producto?.origen_pais,\n  palabras_clave: producto?.palabras_clave,\n  meta_title: producto?.meta_title,\n  meta_description: producto?.meta_description,\n  creado_el: producto?.creado_el,\n  actualizado_el: producto?.actualizado_el,\n  landing_tipo: producto?.landing_tipo || 'temu',\n  numero_de_ventas: producto?.numero_de_ventas || 0,\n  calificacion_promedio: producto?.calificacion_promedio || 0,\n  total_resenas: producto?.total_resenas || 0,\n  \n  // Columnas antiguas (text/json) como string\n  banner_animado: aObjeto(producto?.banner_animado, { mensajes: [] }),\n  puntos_dolor: aObjeto(producto?.puntos_dolor, { titulo: '¿Te sientes identificado con estos problemas?', subtitulo: 'Problemas que resuelve tu producto', timeline: [] }),\n  caracteristicas: convertirAJsonString(producto?.caracteristicas),\n  testimonios: aObjeto(producto?.testimonios, { titulo: 'Lo que dicen nuestros clientes', totalClientes: 0, items: [] }),\n  faq: aObjeto(producto?.faq, { titulo: 'Preguntas Frecuentes', preguntas: [] }),\n  garantias: aObjeto(producto?.garantias, { titulo: 'Garantías', items: [] }),\n  cta_final: aObjeto(producto?.cta_final, { titulo: 'Listo para comprar', subtitulo: '', boton_texto: 'Comprar ahora' }),\n  promociones: aObjeto(producto?.promociones, { items: [] }),\n  \n  // Nuevos campos JSONB como OBJETO (no string)\n  caracteristicas_jsonb: aObjeto(producto?.caracteristicas_jsonb || producto?.caracteristicas, defaultCaracteristicas),\n  ventajas_jsonb: aObjeto(producto?.ventajas_jsonb || producto?.ventajas, defaultVentajas),\n  beneficios_jsonb: asegurarTresItemsBeneficios(producto?.beneficios_jsonb || producto?.beneficios)\n};\n\nconsole.log('âœ… Producto preparado para Supabase');\nconsole.log('   - estado:', productoParaSupabase.estado);\nconsole.log('   - caracteristicas_jsonb es objeto:', typeof productoParaSupabase.caracteristicas_jsonb === 'object');\nconsole.log('   - ventajas_jsonb es objeto:', typeof productoParaSupabase.ventajas_jsonb === 'object');\nconsole.log('   - beneficios_jsonb items:', productoParaSupabase.beneficios_jsonb?.items?.length);\n\nreturn {\n  json: {\n    producto_para_supabase: productoParaSupabase,\n    conversion_exitosa: true\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1552,
        0
      ],
      "id": "preparar_json_supabase",
      "name": "Preparar JSON para Supabase"
    },
    {
      "parameters": {
        "tableId": "productos",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "nombre",
              "fieldValue": "={{ $json.producto_para_supabase.nombre }}"
            },
            {
              "fieldId": "slug",
              "fieldValue": "={{ $json.producto_para_supabase.slug }}"
            },
            {
              "fieldId": "descripcion",
              "fieldValue": "={{ $json.producto_para_supabase.descripcion }}"
            },
            {
              "fieldId": "ganchos",
              "fieldValue": "={{ $json.producto_para_supabase.ganchos }}"
            },
            {
              "fieldId": "precio",
              "fieldValue": "={{ $json.producto_para_supabase.precio }}"
            },
            {
              "fieldId": "precio_original",
              "fieldValue": "={{ $json.producto_para_supabase.precio_original }}"
            },
            {
              "fieldId": "descuento",
              "fieldValue": "={{ $json.producto_para_supabase.descuento }}"
            },
            {
              "fieldId": "estado",
              "fieldValue": "={{ $json.producto_para_supabase.estado }}"
            },
            {
              "fieldId": "categoria_id",
              "fieldValue": "={{ $json.producto_para_supabase.categoria_id }}"
            },
            {
              "fieldId": "stock",
              "fieldValue": "={{ $json.producto_para_supabase.stock }}"
            },
            {
              "fieldId": "peso",
              "fieldValue": "={{ $json.producto_para_supabase.peso }}"
            },
            {
              "fieldId": "dimensiones",
              "fieldValue": "={{ $json.producto_para_supabase.dimensiones }}"
            },
            {
              "fieldId": "marca",
              "fieldValue": "={{ $json.producto_para_supabase.marca }}"
            },
            {
              "fieldId": "modelo",
              "fieldValue": "={{ $json.producto_para_supabase.modelo }}"
            },
            {
              "fieldId": "color",
              "fieldValue": "={{ $json.producto_para_supabase.color }}"
            },
            {
              "fieldId": "talla",
              "fieldValue": "={{ $json.producto_para_supabase.talla }}"
            },
            {
              "fieldId": "material",
              "fieldValue": "={{ $json.producto_para_supabase.material }}"
            },
            {
              "fieldId": "garantia_meses",
              "fieldValue": "={{ $json.producto_para_supabase.garantia_meses }}"
            },
            {
              "fieldId": "origen_pais",
              "fieldValue": "={{ $json.producto_para_supabase.origen_pais }}"
            },
            {
              "fieldId": "palabras_clave",
              "fieldValue": "={{ $json.producto_para_supabase.palabras_clave }}"
            },
            {
              "fieldId": "meta_title",
              "fieldValue": "={{ $json.producto_para_supabase.meta_title }}"
            },
            {
              "fieldId": "meta_description",
              "fieldValue": "={{ $json.producto_para_supabase.meta_description }}"
            },
            {
              "fieldId": "creado_el",
              "fieldValue": "={{ $json.producto_para_supabase.creado_el }}"
            },
            {
              "fieldId": "actualizado_el",
              "fieldValue": "={{ $json.producto_para_supabase.actualizado_el }}"
            },
            {
              "fieldId": "landing_tipo",
              "fieldValue": "={{ $json.producto_para_supabase.landing_tipo }}"
            },
            {
              "fieldId": "numero_de_ventas",
              "fieldValue": "={{ $json.producto_para_supabase.numero_de_ventas }}"
            },
            {
              "fieldId": "calificacion_promedio",
              "fieldValue": "={{ $json.producto_para_supabase.calificacion_promedio }}"
            },
            {
              "fieldId": "total_resenas",
              "fieldValue": "={{ $json.producto_para_supabase.total_resenas }}"
            },
            {
              "fieldId": "banner_animado",
              "fieldValue": "={{ $json.producto_para_supabase.banner_animado }}"
            },
            {
              "fieldId": "puntos_dolor",
              "fieldValue": "={{ $json.producto_para_supabase.puntos_dolor }}"
            },
            {
              "fieldId": "caracteristicas",
              "fieldValue": "={{ $json.producto_para_supabase.caracteristicas }}"
            },
            {
              "fieldId": "testimonios",
              "fieldValue": "={{ $json.producto_para_supabase.testimonios }}"
            },
            {
              "fieldId": "faq",
              "fieldValue": "={{ $json.producto_para_supabase.faq }}"
            },
            {
              "fieldId": "garantias",
              "fieldValue": "={{ $json.producto_para_supabase.garantias }}"
            },
            {
              "fieldId": "cta_final",
              "fieldValue": "={{ $json.producto_para_supabase.cta_final }}"
            },
            {
              "fieldId": "promociones",
              "fieldValue": "={{ $json.producto_para_supabase.promociones }}"
            },
            {
              "fieldId": "caracteristicas_jsonb",
              "fieldValue": "={{ $json.producto_para_supabase.caracteristicas_jsonb }}"
            },
            {
              "fieldId": "ventajas_jsonb",
              "fieldValue": "={{ $json.producto_para_supabase.ventajas_jsonb }}"
            },
            {
              "fieldId": "beneficios_jsonb",
              "fieldValue": "={{ $json.producto_para_supabase.beneficios_jsonb }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        1856,
        0
      ],
      "id": "1632a071-ebbf-4b17-aba3-1d5c97bd71df",
      "name": "Crear Producto en Supabase",
      "credentials": {
        "supabaseApi": {
          "id": "W8gqsCw5s1YHm5SZ",
          "name": "Supabase Me LLEVO ESTO"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// ðŸ”„ PROCESADOR DE JSON DE PRODUCTO\nconsole.log('ðŸ”„ PROCESANDO PRODUCTO JSON');\n\nconst entrada = $input.first();\nconst producto = entrada.json.producto_objeto;\n\nconsole.log('ðŸ“¥ Producto recibido:', producto.nombre);\nconsole.log('ðŸ“Š Campos disponibles:', Object.keys(producto));\n\n// ðŸ”¥ PROCESAR CATEGORÃA\nlet categoriaId = null;\nlet categoriaNombre = 'General';\n\nif (producto.categoria) {\n  if (typeof producto.categoria === 'object' && producto.categoria.id) {\n    categoriaId = producto.categoria.id;\n    categoriaNombre = producto.categoria.nombre;\n  } else if (typeof producto.categoria === 'string') {\n    // Buscar categorÃ­a por nombre\n    const categorias = entrada.json.categorias || [];\n    const catEncontrada = categorias.find(cat => \n      cat.nombre.toLowerCase().includes(producto.categoria.toLowerCase())\n    );\n    if (catEncontrada) {\n      categoriaId = catEncontrada.id;\n      categoriaNombre = catEncontrada.nombre;\n    }\n  }\n}\n\n// ðŸ”¥ PROCESAR IMÃGENES\nlet imagenesProcesadas = {\n  principal: null,\n  galeria: [],\n  imagen_caracteristicas: null\n};\n\nif (producto.imagenes) {\n  if (typeof producto.imagenes === 'object') {\n    // Formato objeto\n    imagenesProcesadas.principal = producto.imagenes.principal || null;\n    imagenesProcesadas.galeria = Array.isArray(producto.imagenes.galeria) \n      ? producto.imagenes.galeria.slice(0, 5) \n      : [];\n    imagenesProcesadas.imagen_caracteristicas = producto.imagenes.imagen_caracteristicas || null;\n  } else if (typeof producto.imagenes === 'string') {\n    // Formato string - usar como imagen principal\n    imagenesProcesadas.principal = producto.imagenes;\n  }\n}\n\n// ðŸ”¥ PROCESAR PRECIOS\nlet precio = 0;\nlet precioOriginal = 0;\nlet descuento = 0;\n\nif (producto.precio) {\n  if (typeof producto.precio === 'string') {\n    precio = parseInt(producto.precio.replace(/[^0-9]/g, '')) || 0;\n  } else if (typeof producto.precio === 'number') {\n    precio = producto.precio;\n  }\n}\n\nif (producto.precio_original) {\n  if (typeof producto.precio_original === 'string') {\n    precioOriginal = parseInt(producto.precio_original.replace(/[^0-9]/g, '')) || 0;\n  } else if (typeof producto.precio_original === 'number') {\n    precioOriginal = producto.precio_original;\n  }\n}\n\n// Calcular descuento si hay precio original\nif (precioOriginal > 0 && precio < precioOriginal) {\n  descuento = Math.round(((precioOriginal - precio) / precioOriginal) * 100);\n}\n\n// ðŸ”¥ PROCESAR ESPECIFICACIONES\nlet especificacionesProcesadas = {\n  marca: 'No especificada',\n  modelo: 'No especificado',\n  material: 'No especificado',\n  color: 'No especificado',\n  talla: 'No especificado',\n  peso: 'No especificado',\n  garantia_meses: 0,\n  origen_pais: 'No especificado',\n  dimensiones: 'No especificado'\n};\n\nif (producto.especificaciones) {\n  if (typeof producto.especificaciones === 'object') {\n    Object.assign(especificacionesProcesadas, producto.especificaciones);\n  } else if (typeof producto.especificaciones === 'string') {\n    // Parsear string JSON si es necesario\n    try {\n      const especs = JSON.parse(producto.especificaciones);\n      Object.assign(especificacionesProcesadas, especs);\n    } catch (e) {\n      console.log('âš ï¸ No se pudo parsear especificaciones string');\n    }\n  }\n}\n\n// ðŸ”¥ CREAR PRODUCTO PROCESADO\nconst productoProcesado = {\n  // Campos bÃ¡sicos\n  nombre: producto.nombre || 'Producto sin nombre',\n  slug: producto.nombre \n    ? producto.nombre.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '')\n    : 'producto-sin-nombre',\n  descripcion: producto.descripcion || 'Sin descripciÃ³n',\n  ganchos: producto.ganchos || null,\n  precio: precio,\n  precio_original: precioOriginal,\n  descuento: descuento,\n  estado: 'activo',\n  categoria_id: categoriaId,\n  stock: producto.stock || 10,\n  \n  // Especificaciones\n  peso: especificacionesProcesadas.peso,\n  dimensiones: especificacionesProcesadas.dimensiones,\n  marca: especificacionesProcesadas.marca,\n  modelo: especificacionesProcesadas.modelo,\n  color: especificacionesProcesadas.color,\n  talla: especificacionesProcesadas.talla,\n  material: especificacionesProcesadas.material,\n  garantia_meses: especificacionesProcesadas.garantia_meses,\n  origen_pais: especificacionesProcesadas.origen_pais,\n  \n  // SEO y metadatos\n  palabras_clave: producto.palabras_clave || null,\n  meta_title: producto.meta_title || producto.nombre || 'Producto',\n  meta_description: producto.meta_description || producto.descripcion || 'Producto disponible',\n  \n  // Fechas\n  creado_el: new Date().toISOString(),\n  actualizado_el: new Date().toISOString(),\n  \n  // Landing\n  landing_tipo: 'temu',\n  numero_de_ventas: 0,\n  calificacion_promedio: 0,\n  total_resenas: 0,\n  \n  // ðŸ”¥ CAMPOS JSON COMPLETOS\n  banner_animado: producto.banner_animado || null,\n  puntos_dolor: producto.puntos_dolor || null,\n  caracteristicas: producto.caracteristicas || null,\n  testimonios: producto.testimonios || null,\n  faq: producto.faq || null,\n  garantias: producto.garantias || null,\n  cta_final: producto.cta_final || null,\n  promociones: producto.promociones || null,\n  \n  // ðŸ”¥ NUEVOS CAMPOS JSONB\n  ventajas: producto.ventajas || null,\n  beneficios: producto.beneficios || null\n};\n\nconsole.log('âœ… PRODUCTO PROCESADO EXITOSAMENTE');\nconsole.log('ðŸ“‹ Nombre:', productoProcesado.nombre);\nconsole.log('ðŸ’° Precio:', productoProcesado.precio);\nconsole.log('ðŸ·ï¸ CategorÃ­a:', categoriaNombre);\nconsole.log('ðŸ“Š Campos JSON:', {\n  caracteristicas: !!productoProcesado.caracteristicas,\n  ventajas: !!productoProcesado.ventajas,\n  beneficios: !!productoProcesado.beneficios\n});\n\nreturn {\n  json: {\n    producto_procesado: productoProcesado,\n    categoria_nombre: categoriaNombre,\n    imagenes_procesadas: imagenesProcesadas,\n    procesamiento_exitoso: true\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1328,
        0
      ],
      "id": "procesador_json",
      "name": "Procesador JSON"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        752,
        384
      ],
      "id": "abd59981-4342-4617-90cc-b9a47a9e6286",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "afEdUlo465aPlyDq",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "nombre_del_usuario",
              "value": "={{ $json.nombre_del_usuario }}"
            },
            {
              "name": "id_del_usuario",
              "value": "={{ $json.id_del_usuario }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        528,
        0
      ],
      "id": "0822be25-10a3-4c89-ae19-768261da2762",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "De_que_trata_el_producto"
            },
            {
              "name": "precio"
            },
            {
              "name": "nombre_producto"
            },
            {
              "name": "caracteristicas"
            }
          ]
        }
      },
      "id": "1ca19ae4-9b39-4a11-b63e-3dcb86d10820",
      "typeVersion": 1.1,
      "name": "When Executed by Another Workflow",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "position": [
        256,
        0
      ]
    }
  ],
  "connections": {
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent Creador Productos",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "consultar_categorias": {
      "ai_tool": [
        [
          {
            "node": "AI Agent Creador Productos",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent Creador Productos": {
      "main": [
        [
          {
            "node": "Detector Tipo Respuesta",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Detector Tipo Respuesta": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Procesador JSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Procesador JSON": {
      "main": [
        [
          {
            "node": "Preparar JSON para Supabase",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Preparar JSON para Supabase": {
      "main": [
        [
          {
            "node": "Crear Producto en Supabase",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "AI Agent Creador Productos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent Creador Productos",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    }
  },
  "pinData": {
    "When Executed by Another Workflow": [
      {
        "De_que_trata_el_producto": "Motocicleta GIXXER FI 150 ABS modelo 2026, nueva",
        "precio": "11190000",
        "nombre_producto": "GIXXER FI 150 ABS",
        "caracteristicas": "Modelo 2026, con sistema ABS, completamente nueva, entrega a nombre del nuevo cliente."
      }
    ]
  },
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "creador_de_productos_actualizado_001"
  }
}
